# 开源项目治理架构调研

## PaddlePaddle

### 1.角色和职责

#### 社区治理

由飞桨社区开源发展工作组 PPOSDWG进行治理。

人员构成：

- 工作组由9人组成：4名来自百度雇员、5名来自非百度雇员。
- 工作组秘书：秘书可以不是工作组成员，主要负责召集、主持会议等。

工作组职责：

- 决策社区运营当中的关键事项，如：
  - 开源贡献证书上的文案。
  - 评选社区开源之星。
  - 制作什么样的社区礼品。
- 为社区未来的建设和发展提供建议
  - 举办什么样的社区活动
  - 完善和建设什么样的流程。（如：成为committer的流程、黑客松任务的参赛流程、PFCC例会是否需要改善、等）
- 仲裁社区中的突发事件
  - 违反Code of Conduct的情况的认定和处理。
  - 社区活动中，出现争议事件时的认定和仲裁。

ref：[pposdwg章程](https://github.com/PaddlePaddle/community/blob/master/pposdwg/pposdwg_charter.md)

#### 技术治理

与代码库相关的角色和权限如下：

| 角色        | 社区职责                                                     |
| ----------- | ------------------------------------------------------------ |
| Anyone      | 代码仓库的 read 权限，pr 及 issue 的创建与评论               |
| Triager     | 管理代码仓库中的PR与ISSUE，负责PR 及 ISSUE 的分派与编辑。    |
| Contributor | 以 PR 的方式，为飞桨的代码仓库贡献代码或文档。               |
| Committer   | 为飞桨社区的 PR 贡献提供修改建议，并判断是否可以合入；具有代码仓库的 write 权限，可分派和编辑 pr 和 issue |
| Maintainer  | 领导飞桨框架的发展方向与技术规划；具有代码仓库的 write 权限，可分派和编辑 pr 和 issue |

ref: [飞桨代码角色和权限](https://github.com/PaddlePaddle/community/blob/master/contributors/community-membership.md)

此外，部分子项目由自己的项目管理委员会PMC进行管理。

##### Paddle2ONNX PMC

PMC 的人员构成：

- PMC 由不少于 3 名在飞桨开源社区进行过开源贡献的开发者组成。
- PMC 设置主席一名，主席负责维持 PMC 的正常运转。
- PMC 成员仅以个人身份进行该项目的维护和开发，不代表各自雇主的利益。

PMC 的职责：

- 确保 Paddle2ONNX 的 Issue 和 PR 得到及时处理。
- 对用户对 Paddle2ONNX 提出的需求进行 review 并做出决策。
- 协同社区的开发者开发 Paddle2ONNX 项目的新的功能。

PMC的沟通机制：

- 定期举行对内会议，会议中需要研讨 Paddle2ONNX 的当前形势以及未来的项目发展。（建议每两周举行一次会议）
- 会议议程和纪要需公开在开源社区中。（使用 [Community](https://github.com/PaddlePaddle/community) 代码仓库）
- 每个季度形成 Paddle2ONNX 项目的状态报告，由[飞桨社区开源发展工作组](https://github.com/PaddlePaddle/community/tree/master/pposdwg)组织相关的专家，对报告进行 Review 并提供反馈。

PMC的其他职责：

- 飞桨项目间依赖： Paddle2ONNX 项目的主要目的是为飞桨的模型到 ONNX 模型的转换提供支持。 在 Paddle2ONNX 项目开发过程中遇到对其他飞桨项目的技术依赖时，PMC 可要求[飞桨社区开源发展工作组](https://github.com/PaddlePaddle/community/tree/master/pposdwg)内的来自百度的成员来协助解决问题。
- 权限相关： 在涉及到代码仓库权限、CI 流水线权限 、及其他的权限问题时， PMC 可要求[飞桨社区开源发展工作组](https://github.com/PaddlePaddle/community/tree/master/pposdwg)内的来自百度的成员提供协助。
- 社区运营： Paddle2ONNX在运作过程中可能需要一定的运营支持（包括直播、推文等）， PMC 可要求[飞桨社区开源发展工作组](https://github.com/PaddlePaddle/community/tree/master/pposdwg)内的来自百度的成员来协助解决问题。

ref：[Paddle2ONNX PMC 的章程](https://github.com/PaddlePaddle/Paddle2ONNX/issues/1185)

##### PaddleOCR PMC

ref：[paddleOCR的PMC](https://github.com/PaddlePaddle/community/blob/master/pposdwg/2024-Q2-meeting-minutes.md)（[讨论如何维护OCR](https://github.com/PaddlePaddle/PaddleOCR/issues/11859)）

#### 其他治理组织

##### 技术交流组织：飞桨核心框架贡献者俱乐部 PFCC

Paddle Framework Contributor Club，是一个有兴趣、正在、或者已经为[飞桨开源框架](https://github.com/PaddlePaddle/Paddle/)做开源贡献的贡献者成立的虚拟组织，在这里，飞桨开源框架的贡献者进行讨论、交流和分享，并为飞桨框架做出持续的贡献。

角色及职责：

| 角色        | 社区职责                                                     |
| ----------- | ------------------------------------------------------------ |
| Club 主席   | 负责发起每次的Club例会，征集下次会议的议题，设定会议议程，主持会议，记录会议纪要，并将最终的会议纪要发布在本目录下。 |
| Club 副主席 | 负责督促主席履行其职责。                                     |
| Club 成员   | 贡献讨论议题，并给飞桨框架做贡献。                           |

ref：[pfcc介绍](https://github.com/PaddlePaddle/community/tree/master/pfcc)

##### 特殊兴趣小组

ref：[特殊兴趣小组](https://github.com/PaddlePaddle/community/blob/master/ppsigs/README.md)

### 2.任命机制

#### 代码角色获取条件

| 角色        | 获得方式                                                     |
| ----------- | ------------------------------------------------------------ |
| Anyone      | 无                                                           |
| Triager     | 因实际项目的需要，对一部分PR或者ISSUE进行分类、编辑与分派（e.g.：[intel label](https://github.com/PaddlePaddle/Paddle/issues?q=label%3Aintel+)）。 |
| Contributor | 所提交的 PR 被成功合入代码仓库。                             |
| Committer   | 若干条高质量的已合入 PR，若干条高质量的PR Review (或者Issue），2 名 Committer 的认可。获取流程：在代码仓库下按照 模板 提 Issue，取得 2 名 Committer 的正向评价后，由 Maintainer 开通权限。 |
| Maintainer  | 在飞桨开源社区内获取广泛且充分的影响力。                     |

#### 飞桨社区开源发展工作组

任命流程：

- 对于来自百度的成员：在百度内部商议产生，但是需要在社区内，进行信任票的投票。
- 对于来自社区的成员：需要从社区内选举产生，提前两周进行候选人征集，征集完成后，在社区内，进行投票产生。
- 候选人需要准备的材料：准备一份简单的自我陈述的材料即可，材料里简介一下自己对开源和飞桨的认识，和对参与工作组的承诺。
- 具体投票流程
  - 投票人资格：给飞桨社区做出过代码贡献的社区开发者（指代码曾经合入PaddlePaddle组织下的代码仓库）。
  - 飞桨社区会召集专门的线上会议，来选举产生工作组成员。参加会议的投票人人数需要超过20人，才可以开展投票。
  - 对于信任票，每名投票人都可以选择：同意（+1）、反对（-1）、弃权（0）。同意票减去反对票，超过10，则视为通过。
  - 对于选举票，每名投票人有三张选票。得票数量最多的5名候选人成为成员。

任期：

* 任期为一年，到期之后重新产生新的工作组。
* 成员可在任何时间辞任，辞任后，需重新产生新的成员。
* 任何成员如果连续缺席两次工作组的会议，则视为自动放弃成员身份。

#### 飞桨核心框架贡献者俱乐部 PFCC

任命流程：主席/副主席轮值担任。在当次例会结束后，副主席自动成为下次会议的主席，并且有权指定成员中的任何一位担任下次会议的副主席，被指定的成员无权拒绝。

### 3.决策机制

#### 飞桨社区开源发展工作组

对于重大决策（如需要仲裁类的事项），需要超过2/3的成员投票赞成，才可通过。

对于一般决策，采用默认通过的方式。（一名成员提出提议，另一名成员提出复议，其他人无人反对，即可通过。）

## Pytorch

### 1.角色和职责

#### 社区治理

由linux基金会旗下的 [pytorch基金会](https://pytorch.org/foundation)进行治理。pytorch基金会建立了一个[管理委员会](https://pytorch.org/governing-board)，根据其指导原则监督基金会的活动。基金会得到其成员和 pytorch 开源项目主要贡献者的支持，利用成员和贡献者提供的资源来促进社区讨论和协作。

职责：管理项目，包括确保pytorch中的技术可供社区使用且不受党派影响，并确保技术的品牌（商标和徽标）得到社区成员的适当使用；通过活动和会议、营销、培训班和开发人员认证等方式推广基础技术、库和其他工件。

治理[价值观和原则](https://pytorch.org/assets/pytorch-foundation-principles.pdf)：开放和可访问；品牌中立；公平；高技术特性；明确目标和界限。

#### 技术治理

采用分层治理架构，最终决策权由BDFL(仁慈的独裁者)决定。[治理文档](https://pytorch.org/docs/master/community/governance.html)

与代码库相关的角色和权限如下：

| 角色                       | 社区职责                                                     |
| -------------------------- | ------------------------------------------------------------ |
| contributors               | 创建issue，提交pr                                            |
| module maintainers         | pytorch每个模块的维护者，模块指pytorch组织内的github repo或核心repo的pytorch/pytorch 中的目录。<br />审查和批准commits；识别issue优先级；支持模块相关的公共文档；召开公开的开发者会议。 |
| core maintainers           | pytorch gitHub 组织的管理员。[列表](https://pytorch.org/docs/stable/community/persons_of_interest.html)。<br />推动整个pytorch项目的方向。具体来讲，为项目阐明一个有凝聚力的长期愿景；以各方都能接受的方式谈判和解决有争议的问题；评估/接受ptyorch利益相关者的更改请求；监督模块维护者。 |
| lead core maintainer(BDFL) | 核心维护者中的最高决策者。<br />在核心维护者无法达成共识时，公开做出最终决定，并给出明确的决策理由；任命(confirm)或删除核心维护者。 |

### 2.任命机制

#### 模块维护者

任命原则：根据功绩(merit)任命，包括贡献、review、讨论等。此外，其表现需要与pytorch的原则和方向保持一致。

任命流程：提名机制，任何人可以进行提名。每个模块都有其特定流程，但对于没有确定流程的模块，提名者可以向核心维护者提出请求，写明被提名者的信息：对模块的代码、review和设计贡献的深度和广度；与维护者、用户和社区的互动程度；其他推荐信息，由核心维护者进行评估并公开最终决定。核心维护者每三个月召开一次会议。

任期：无任期限制，但长期不积极参与的维护者会被转移到“名誉”状态。“长期不积极参与”的时间由每个模块维护者组自行定义。

卸任流程：提名机制，社区中的任何人都可以提名移除某维护者，维护者也可以提名移除自己。核心维护者（不包括利益冲突者）收集和汇总被提名者的信息：在项目中的活动（或缺乏活动）；其想法与项目的整体方向冲突；其他不适合成为维护者的信息如行为准则问题；利益冲突问题如子女或恋爱关系。核心维护者进行评估并公开最终决定。

例子：[build+CI模块的任命原则和流程](https://pytorch.org/docs/master/community/build_ci_governance.html)。

#### 核心维护者

任命原则：同上。

任命流程：提名机制。由模块或核心维护者进行提名，首席维护者汇集来自其他核心和模块维护者的支持信、pytorch社区利益相关者的支持信和支持候选人任职的相关信息，然后进行评估和公开最终决定，并阐明决策理由。

任期：同上。

卸任流程：同上。

#### 首席维护者BDFL

卸任流程：提名机制。75%的核心维护者同意下可移除首席维护者。在首席核心维护者被移除后或在不可预见的情况下（如首席核心维护者永久不可用），核心维护者将按照排名选择投票方法选出新的首席核心维护者。

### 3.决策机制

#### 一般决策

主要通过github上的issue和pr进行，由核心或模块维护者批准和允许合并pr，无需进一步处理。

此外，建议将issue和pr通知相关领域的专家进行review和准入。

#### 有争议的决策

重大更改需要单独打开issue讨论。有争议的决策包括：

* 对 PyTorch 框架或库的任何语义或语法更改。
* 对 Python 或 C++ API 的向后不兼容更改。
* 对核心框架或库的补充，包括现有库中的大量新功能。
* 删除核心功能或平台支持。

## hadoop

### 1.角色和职责

#### 社区治理

-

#### 技术治理

由PMC对项目进行管理。与代码库相关的角色和权限如下：

| 角色                         | 社区职责                                                     |
| ---------------------------- | ------------------------------------------------------------ |
| users                        | 报告bug，提出新功能建议，通过邮件列表和用户论坛来帮助其他用户 |
| contributors                 | 为Hadoop项目贡献时间、代码、文档或资源的志愿者               |
| committers                   | 负责项目的技术管理。<br />可访问所有子项目和子版本存储库；对有关任何子项目的任何技术讨论投下具有约束力的投票。此外，重要的、普遍的功能通常在存储库的预备分支中开发，在开发计划进行时PMC可以将分支的commit权限授予其持续贡献者。这些分支提交者负责将功能引导到一个活跃的版本中，且不会在项目中投约束力的票或否决票。 |
| release manager              | 负责release的committer。<br />应至少在发布前一周在通用dev@列表中发布release plan，并列出准备用于创建Release Candidate版本的分支。RM 负责围绕候选发布的内容达成共识，以便成功进行产品发布投票。 |
| project management committee | 决定将哪些内容作为Apache Hadoop项目的产品分发，尤其是所有版本都必须经过 PMC 的批准；维护项目的共享资源，包括代码库存储库、邮件列表、网站；代表项目发言；解决项目产品的许可纠纷；提名新的 PMC 成员和提交者；维护项目的这些章程和其他准则。<br />PMC有一名主席，主席是Apache软件基金会的官员(officer)，对董事会负有主要责任，负责Hadoop项目管理范围内的项目，并于每季度向董事会报告Hadoop项目的进展情况。 |

### 2.任命机制

任命和移除的投票流程见“决策机制-批准和执行”。

#### committers

任命原则：对项目做出持续、受欢迎的贡献的contributor可能会被邀请成为committer。所有committer都必须签署贡献者许可协议(CLA)。

任命流程：只能通过邀请进行，并且必须由活跃的 PMC 成员一致批准。

任期：committer超过六个月没有以任何形式对项目做出贡献或自己声明后被视为“名誉”。名誉提交者可以请求恢复 PMC 的提交访问权限，恢复须经活跃的 PMC 成员一致批准。

#### release manager

任命原则：自愿根据 [HowToRelease](https://cwiki.apache.org/confluence/display/HADOOP2/HowToRelease) 规则创建Release Candidate版本的committer。

#### 项目管理委员会PMC

任命原则：对项目做出持续贡献的提交者可能会被邀请成为PMC成员。贡献形式包括代码、代码审查、帮助邮件列表上的用户、文档、测试等。

任命流程：

* PMC 的成员资格只能通过邀请获得，并且必须得到活跃的 PMC 成员的一致批准。
* PMC 的主席由 ASF 董事会任命。

任期：

* committer超过六个月没有以任何形式对项目做出贡献或自己声明后被视为“名誉”。名誉提交者可以请求恢复 PMC 的提交访问权限，恢复须经活跃的 PMC 成员一致批准。
* PMC的主席每年轮换一次。当主席轮换或现任 PMC 主席辞职时，PMC 使用单一可转让投票 (STV) 投票推荐新主席。

### 3.决策机制

#### Voting 投票

项目决策在general@hadoop.apache.org上通过回复邮件的方式投票做出，必要时可以在私有Hadoop PMC邮件列表上进行PMC投票。若投票包含多个待批准项目，则这些项目应明确分开。投票也可以应用于对hadoop代码库所做的更改，通常通过对相应commit进行否决(-1)来实现。

1）投票的种类：

- **+1**  “是”、“同意”或“应执行操作”。
- **+0** 投票者愿意继续该投票事项，但自己无法提供帮助。
- **-0** 投票者不同意继续该投票事项，但也没有强烈的阻止意愿或关注度。
- **-1** 反对票。在需要协商一致的问题上，该投票算作否决票(vetos)，需要解释否决理由否则否决无效。在投出反对票时，可以同时提出替代行动方案。有效的、具有约束力的否决票不能被推翻。否决票需要解释否决理由。否决权的有效性如果受到质疑，可以由任何拥有有约束力的投票的人确认其有效性。不同意有效的否决票的人必须说服投否决票的人撤回否决票，否则任何被否决的行动都必须及时撤销。

2）投票的约束力(binding)：

hadoop项目鼓励所有参与者通过投票来表示他们同意或反对某项特定行动，但不同投票者具有不同约束力。

* 对于技术决策，只有活跃提交者的投票才具有约束力。尽管如此，非约束性投票可以让提交者更广泛地了解更hadoop社区中对行动的看法。
* 对于 PMC 的决定，只有 PMC 成员的投票才具有约束力。

3）投票时间：

一般开放期为 7 天，发布相关投票为5天，与代码更改相关的投票没有严格的时间限制但尽可能及时进行。

#### 批准和执行

不同的操作需要不同类型的批准：

- 共识批准 Consensus Approval -需要 3 票具有约束力的 +1 票，且无具有约束力的否决票。
- 懒惰共识 Lazy Consensus - 不需要 -1 票（“沉默表示同意”）。
- 懒惰多数 Lazy Majority - 需要 3 张具有约束力的 +1 票，且具有约束力的 +1 票比 -1 票更多。
- 懒惰的 2/3 多数 Lazy 2/3 Majority - 至少需要 3 票，且 +1 票是 -1 票的两倍。

以下是在项目中采取的各种行动、该行动所需的相应批准以及对该行动拥有约束力投票的人。

- 更改代码库：共识批准
- 产品发布：PMC懒惰多数
- 采用新代码库：PMC懒惰的 2/3 多数
- 新的分支committer：活跃 PMC 成员的懒惰共识
- 新committer：活跃 PMC 成员的共识批准
- 新 PMC 成员：活跃 PMC 成员的共识批准
- 移除分支committer：活跃 PMC 成员懒惰的 2/3 多数
- 移除committer：活跃 PMC 成员懒惰的 2/3 多数
- 移除PMC 成员：活跃 PMC 成员懒惰的 2/3 多数（不包括相关成员）
- 修改章程：活跃 PMC 成员懒惰多数

### 4.其他社区规则

发布指南： [HowToRelease](https://cwiki.apache.org/confluence/display/HADOOP2/HowToRelease) 











