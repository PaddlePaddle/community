# DrivAerNet 论文复现设计文档

| 任务名称                     | Hackathon 7th PPSCI No.4 |  
|-----------------------------|--------------------------|
| 提交作者                     | LilaKen                 |  
| 提交时间                     | 2024-11-05              |  
| 版本号                       | V1.0                    |  
| 依赖飞桨版本                 | 基于 develop 版本开发   |  
| 文件名                       | 20241105_api_design_for_DrivAerNet.md |  

# 一、概述
## 1、相关背景
在汽车设计中，气动性能直接影响到燃油效率、行驶稳定性及安全性等多个方面。过去通常使用基于数值方法的计算流体力学（CFD）或风洞实验来优化设计，但这些方法成本高昂、耗时长。在深度学习迅速发展的背景下，基于数据驱动的方法可以通过学习几何与气动性能之间的关系，快速估算设计的气动性能。

## 2、功能目标
本次任务的目标是复现基于 DrivAer 数据集的 RegDGCNN 网络模型。DrivAer 数据集包含 4000 个数据样本，设计的网络可以对不同汽车几何结构进行高效的气动阻力预测。通过本项目，将实现以下具体功能：
1. 复现 DrivAer 数据集上的 RegDGCNN 模型。
2. 实现与论文一致的精度。
3. 完成飞桨版本代码的开发，并满足代码审核要求。

## 3、意义
在复杂几何结构的气动设计中，传统 CFD 计算耗时过长，而基于深度学习的预测模型可以在秒级速度完成仿真。DrivAerNet 提供的高效数据驱动方法有助于提高设计效率，降低仿真成本。同时，RegDGCNN 模型具有更好的空间特征提取能力，能够精准学习复杂几何结构的气动信息。

# 二、飞桨现状
飞桨框架目前支持通用的图卷积网络，但未对 RegDGCNN 的复杂结构和特性提供专门支持。此项目将实现该模型的飞桨复现，并验证其在 DrivAer 数据集上的预测精度。

# 三、业内方案调研
RegDGCNN 基于图卷积网络（GCN）的扩展，利用图网络结构增强对复杂几何特征的学习效果。在研究领域，不同的图神经网络方法如 GCN、GraphSAGE、GAT 等常用于结构数据的特征提取，但在气动特性预测方面，RegDGCNN 表现更佳。以下是几种业内方法的对比：

| 方法       | 模型特点                         | 适用领域                | 优劣势          |
|------------|----------------------------------|-------------------------|-----------------|
| GCN        | 基础图卷积                       | 适用于一般图数据处理    | 结构简单，适用面广，但对局部特征敏感度低 |
| GraphSAGE  | 可扩展的图卷积                   | 大规模图结构            | 支持节点归纳，但对连续数据表现有限 |
| GAT        | 基于注意力机制的图卷积           | 复杂社交网络、推荐系统  | 捕捉复杂依赖关系，但训练复杂度高 |
| RegDGCNN   | 结合多层图卷积和点云特征提取     | 空气动力学、汽车设计    | 精度高，适用于复杂几何结构的气动预测 |

# 四、设计思路与实现方案

## 1. 主体设计具体描述
首先复现基于 Pytorch 版本的 DrivAerNet 代码，并确认与论文指标的精度一致。接着使用 Paconvert 工具将 Pytorch 代码转换为飞桨（Paddle）代码，并手动调整不兼容的部分，特别是图卷积层和自定义激活函数的实现。完成飞桨版本后，在 DrivAer 数据集上测试其精度，确保精度与 Pytorch 版本和原论文一致，计算相对误差并与原始论文进行对比。

## 2. 主体设计选型考量
在 Pytorch 版本中测试了部分 DrivAer 数据，并针对模型复杂度和运行效率进行了调优。飞桨版本的实现考虑了以下选型因素：
- **模型的复杂度**：采用多层卷积结构，对高维数据进行高效特征提取。
- **数据量的规模**：针对 DrivAer 的 4000 个样本设计了适配的批处理和数据加载策略。
- **可扩展性**：考虑到未来其他数据集的适配需求，采用模块化设计方式，便于扩展。

# 五、测试和验收的考量
在复现的 DrivAerNet 模型上，设置以下测试标准：
1. **精度验证**：确保飞桨版本与原 Pytorch 版本的相对误差小于 10%，并对特定情况下的误差情况进行分析，确保实际应用的精确性。
2. **代码可运行性**：保证代码在飞桨框架下顺利运行，包括数据加载、模型训练和评估等全流程。
3. **性能测试**：对比飞桨和 Pytorch 版本的推理速度，验证飞桨版本在相同硬件条件下的加速效果。

# 六、影响面
此次复现的 RegDGCNN 模型为新增 API，暂不对其他模块产生影响，未来可扩展到飞桨的图神经网络模块。

# 七、排期规划
- **2024/11/05 - 2024/11/15**：完成 DrivAerNet 基准模型的 Pytorch 复现，与原论文精度对齐。
- **2024/11/15 - 2024/11/25**：完成飞桨版本的 RegDGCNN 复现，确保与论文基准一致。
- **2024/11/25 - 2024/11/30**：进行最终的性能优化与测试验收，确保模型符合精度要求并完成文档提交。

# 八、名词解释
- **DrivAerNet**：用于汽车设计和气动预测的多模态数据集。
- **RegDGCNN**：基于图卷积的网络模型，用于从复杂几何中提取特征并进行气动性能预测。
- **图卷积网络（GCN）**：一种处理图数据的神经网络，用于提取节点间关系特征。

# 九、附件及参考资料
- DrivAerNet 论文链接：https://www.researchgate.net/publication/378937154_DrivAerNet_A_Parametric_Car_Dataset_for_Data-Driven_Aerodynamic_Design_and_Graph-Based_Drag_Prediction
- DrivAerNet 项目代码参考：https://github.com/Mohamedelrefaie/DrivAerNet
