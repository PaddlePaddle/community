# FastDeploy编译加速设计文档

| 任务名称                                                  |   FastDeploy编译加速                          | 
|----------------------------------------------------------|----------------------------------------------|
| 提交作者<input type="checkbox" class="rowselector hidden">   | ccsuzzh                                     | 
| 提交时间<input type="checkbox" class="rowselector hidden">   | 2025-09-09                                   | 
| 版本号                                                      | V1.0                                         |  
| 文件名                                                      | 20250909_speed_up_compilation_for_fastdeploy.md<br> | 

# 一、概述

## 1、相关背景

随着大语言模型快速推理部署需求的增加，FastDeploy的功能也越来越强大，自定义算子库也越来越丰富，同时也带来了巨大的编译压力。

## 2、功能目标
* 优化FastDeploy编译效率，提升编译源码速度

## 3、意义
提高开发效率，加快CI流水线的速度。

# 二、设计思路与实现方案

## 总体思路
通过调研vllm/sglang等开源库编译方式与流程，总结了两种不同的优化方式：
1.针对nvcc编译器提高内部工作线程，减少编译单个大型 CUDA 源文件所需的时间。
2.利用ccache和sccache工具缓存编译结果，能够加速反复编译的速度。


# 三、测试和验收的考量
以未进行优化前的编译速度为baseline进行比较，首次编译，二次编译，多次编译速度应有不同程度的提升以及CI流水线的速度也有所提升。

# 四、可行性分析和排期规划
* 学习业界主流框架的编译优化方法，可靠性能够得到保证。
* 预计在9月底完成任务收尾工作。

# 五、影响面
只是优化源码编译速度，不涉及其他功能模块的改动，对其他模块没有影响。
